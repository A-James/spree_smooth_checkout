<h3><%= Spree.t(:order_summary) %></h3>

<table data-hook="order_summary" class="table">
  <tbody>
    <tr data-hook="item_total">
      <td><strong><%= Spree.t(:item_total) %>:</strong></td>
      <td><strong><%= order.display_item_total.to_html %></strong></td>
    </tr>
    <tbody id="summary-order-charges" data-hook>
      <% order.adjustments.eligible.each do |adjustment| %>
        <% next if (adjustment.originator_type == 'Spree::TaxRate') and (adjustment.amount == 0) %>
        <tr>
          <td><%= adjustment.label %>: </td>
          <td><%= adjustment.display_amount.to_html %></td>
        </tr>
        <% ### Spree_smooth_checkout_specific ###
           # This could be extracted into a partial but I'm leaving it
           # like this until the structure of the HTML is decided. %>
        <% if adjustment.originator_type == 'Spree::ShippingMethod' %>
            <tr><td colspan="2">
                <%= form_for @order, :url => update_checkout_path(@order.state), :html => {:id => "checkout_form_#{@order.state}"} do |form| %>
                    <input type="hidden" name="dont_transition" id="dont_transition" value="true" />
                    <%= form.fields_for :shipments do |ship_form| %>
                        <% ship_form.object.shipping_rates.with_shipping_method.each do |rate| %>
                            <li class="list-group-item shipping-method">
                              <label>
                                <%= ship_form.radio_button :selected_shipping_rate_id, rate.id %>
                                <span class="rate-name"><%= rate.name %></span>
                                <span class="badge rate-cost"><%= rate.display_cost %></span>
                              </label>
                            </li>
                        <% end %>
                        <div class="well text-right form-buttons" data-hook="buttons">
                          <%= submit_tag Spree.t(:save_and_continue), :class => 'btn btn-lg btn-success' %>
                        </div>
                    <% end %>
                <% end %>
            </td></tr>
        <% end %>
        <% ### Spree_smooth_checkout_specific - FIN ### %>
      <% end %>
    </tbody>
    <tr data-hook="order_total">
      <td><strong><%= Spree.t(:order_total) %>:</strong></td>
      <td><strong><span id='summary-order-total'><%= @order.display_total.to_html %></span></strong></td>
    </tr>
    <% if order.line_item_adjustment_totals.present? %>
      <tbody id="price-adjustments" data-hook="order_details_price_adjustments">
        <% @order.line_item_adjustment_totals.each do |label, total| %>
          <tr class="total">
            <td><strong><%= label %></strong></td>
            <td><strong><span><%= total.to_html %></span></strong></td>
          </tr>
        <% end %>
      </tbody>
    <% end %>
  </tbody>
</table>
